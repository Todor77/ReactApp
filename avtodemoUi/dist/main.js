webpackJsonp([1],{0:function(e,t,n){e.exports=n(278)},35:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments[1];switch(t.type){case p:return c({},e,{isAuthenticated:t.result.data.authenticated,username:t.result.data.userName,errorMessage:null});case d:return c({},e,{isAuthenticated:!1,username:null,errorMessage:t.error.data.messageKey});case m:return c({},e,{isAuthenticated:!1,username:null});case y:return c({},e,{loading:!0});case v:return c({},e,{isAuthenticated:t.result.data.authenticated||!1,username:t.result.data.userName,errorMessage:null,loading:!1});case b:return c({},e,{isAuthenticated:!1,username:null,debugError:t.error,loading:!1});case _:return c({},e,{errorMessage:t.message});default:return e}}function o(e){return{type:_,message:e}}function a(e,t){return{types:[f,p,d],promise:function(n){return n.post("/api/session",{username:e,password:t})},afterSuccess:function(e,t,n){localStorage.setItem("auth-token",n.headers["x-auth-token"]);var r=t().routing.locationBeforeTransitions.state||{};s.browserHistory.push(r.nextPathname||"")}}}function u(){return{types:[h,m,g],promise:function(e){return e.delete("/api/session")},afterSuccess:function(){s.browserHistory.push("login")}}}function i(){return{types:[y,v,b],promise:function(e){return e.get("/api/session")}}}function l(e){return function(t,n){var r=n().routing.locationBeforeTransitions.pathname;t(o(e)),s.browserHistory.replace({pathname:"/login",state:{nextPathname:r}})}}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r,t.displayAuthError=o,t.login=a,t.logout=u,t.getSession=i,t.redirectToLoginWithMessage=l;var s=n(84),f="authentication/LOGIN",p="authentication/LOGIN_SUCCESS",d="authentication/LOGIN_FAIL",h="authentication/LOGOUT",m="authentication/LOGOUT_SUCCESS",g="authentication/LOGOUT_FAIL",y="authentication/GET_SESSION",v="authentication/GET_SESSION_SUCCESS",b="authentication/GET_SESSION_FAIL",_="authentication/ERROR_MESSAGE",E={isAuthenticated:!1,username:null,errorMessage:null,loading:!0}},86:function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case o:return{currentLocale:t.locale};default:return e}}function r(e){return{type:o,locale:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.setLocale=r;var o="locale/SET_LOCALE"},149:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),u=n(144),i=n(653),l=r(i),c=n(644),s=r(c);t.default=(0,u.createDevTools)(a.default.createElement(s.default,{toggleVisibilityKey:"ctrl-h",changePositionKey:"ctrl-q"},a.default.createElement(l.default,null)))},150:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerLocales=t.locales=void 0;var o=n(106),a=r(o),u=n(86),i={en:n(406),fr:n(407)},l=Object.keys(i),c=void 0,s=localStorage.getItem("locale")||"en",f=function(e){return l.forEach(function(e){a.default.registerTranslations(e,i[e])}),e.subscribe(function(){var t=c;c=e.getState().locale.currentLocale,t!==c&&(localStorage.setItem("locale",c),a.default.setLocale(c))}),e.dispatch((0,u.setLocale)(s)),s};t.locales=l,t.registerLocales=f},151:function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case u:return o({},e,{items:t.result.data});default:return e}}function r(){return{types:[a,u,i],promise:function(e){return e.get("/api/simple")}}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=n,t.fetchSimple=r;var a="simple/FETCH",u="simple/FETCH_SUCCESS",i="simple/FETCH_FAIL",l={items:[]}},276:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){if("function"==typeof r)return r(t,n);var a=r.promise,l=r.types,s=r.afterSuccess,f=o(r,["promise","types","afterSuccess"]);if(!r.promise)return e(r);var p=i(l,3),d=p[0],h=p[1],m=p[2];e(u({},f,{type:d}));var g=function(r){e(u({},f,{result:r,type:h})),s&&s(t,n,r)},y=function(t){e(u({},f,{error:t,type:m}))};return a(c.default).then(g,y).catch(function(e){console.error("MIDDLEWARE ERROR:",e),y(e)})}}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=a;var l=n(146),c=r(l)},277:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=(r(o),n(279)),u=r(a),i=n(85),l=n(149),c=(r(l),n(276)),s=r(c),f=[(0,i.applyMiddleware)(s.default)],p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.createStore)(u.default,e,i.compose.apply(void 0,f));return t};t.default=p},278:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(526),a=r(o),u=n(1),i=r(u),l=n(33),c=n(85),s=n(277),f=r(s),p=n(280),d=n(149),h=(r(d),n(35)),m=n(84),g=n(237),y=n(282),v=r(y),b=n(150),_=null,E=(0,f.default)(),O=(0,g.syncHistoryWithStore)(m.browserHistory,E);(0,b.registerLocales)(E);var w=(0,c.bindActionCreators)({redirectToLoginWithMessage:h.redirectToLoginWithMessage,logout:h.logout},E.dispatch);(0,p.setupAxiosInterceptors)(function(){return w.redirectToLoginWithMessage("login.error.unauthorized")}),a.default.render(i.default.createElement(l.Provider,{store:E},i.default.createElement("div",null,_,i.default.createElement(m.Router,{history:O,routes:(0,v.default)(w.logout)}))),document.getElementById("root"))},279:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(85),a=n(151),u=r(a),i=n(35),l=r(i),c=n(86),s=r(c),f=n(237);t.default=(0,o.combineReducers)({simple:u.default,authentication:l.default,locale:s.default,routing:f.routerReducer})},280:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setupAxiosInterceptors=void 0;var o=n(146),a=r(o),u=(n(35),function(e){var t=function(e){var t=localStorage.getItem("auth-token");return t&&(e.headers["x-auth-token"]=t),e.timeout=1e4,e},n=function(e){return e},r=function(t){return 403==t.status&&(localStorage.removeItem("auth-token"),e()),Promise.reject(t)};a.default.interceptors.request.use(t),a.default.interceptors.response.use(n,r)});t.setupAxiosInterceptors=u},281:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(35),f=n(33),p=function(e){return{loading:e.authentication.loading,isAuthenticated:e.authentication.isAuthenticated}},d={redirectToLoginWithMessage:s.redirectToLoginWithMessage},h=function(e){return(0,f.connect)(p,d)(function(t){function n(){return o(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u(n,t),i(n,[{key:"componentDidMount",value:function(){this.redirectIfNotLogged(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.redirectIfNotLogged(e)}},{key:"redirectIfNotLogged",value:function(e){var t=e.loading,n=e.isAuthenticated;t!==!1||n||this.props.redirectToLoginWithMessage("login.error.private")}},{key:"render",value:function(){var t=this.props,n=t.loading,r=t.isAuthenticated;return n||!r?c.default.createElement("div",{className:"center loader"},c.default.createElement("div",null,"Loading...")):c.default.createElement(e,this.props)}}]),n}(c.default.Component))};t.default=h},282:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),u=n(84),i=n(285),l=r(i),c=n(288),s=r(c),f=n(287),p=r(f),d=n(286),h=r(d),m=n(281),g=r(m);t.default=function(e){return a.default.createElement(u.Route,{path:"/",name:"app",component:l.default},a.default.createElement(u.IndexRoute,{component:s.default}),a.default.createElement(u.Route,{path:"private",component:(0,g.default)(p.default)}),a.default.createElement(u.Route,{path:"login",component:h.default}),a.default.createElement(u.Route,{path:"logout",onEnter:e}))}},283:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){var e=this.props.items,t=e.map(function(e,t){return c.default.createElement("li",{key:t},e)});return c.default.createElement("div",null,c.default.createElement("h2",null,"Data:"),c.default.createElement("ul",null,t),c.default.createElement("button",{onClick:this.props.fetchSimple},"Fetch"))}}]),t}(l.Component);t.default=s},284:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=r(c),f=n(246),p=r(f),d=function(e){return s.default.createElement("div",{className:"pure-control-group"},s.default.createElement("label",null,e.label),s.default.createElement("input",e))},h=function(e){var t=e.messageKey;return s.default.createElement("p",{className:"error-panel"},s.default.createElement(p.default,{content:t}))},m=function(e){function t(){var e,n,r,i;a(this,t);for(var l=arguments.length,c=Array(l),s=0;s<l;s++)c[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={username:"",password:""},r.handleInputChange=function(e){var t=e.target.value,n=e.target.name;r.setState(o({},n,t))},r.handleSubmit=function(e){e.preventDefault();var t=r.state,n=t.username,o=t.password,a=r.props.login;a(n,o)},i=n,u(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.errorMessage,t=e?s.default.createElement(h,{messageKey:e}):null;return s.default.createElement("div",null,s.default.createElement(p.default,{component:"h2",content:"login.title"}),s.default.createElement(p.default,{component:"p",content:"login.hint"}),t,s.default.createElement("form",{onSubmit:this.handleSubmit,className:"pure-form pure-form-aligned"},s.default.createElement(d,{onChange:this.handleInputChange,label:"Login",name:"username"}),s.default.createElement(d,{onChange:this.handleInputChange,label:"Password",name:"password",type:"password"}),s.default.createElement("div",{className:"pure-controls"},s.default.createElement("button",{type:"submit",className:"pure-button pure-button-primary"},"Login"))),s.default.createElement("p",null,"TEST to show thats work !"))}}]),t}(c.Component);t.default=m},285:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(84),f=n(33),p=n(35),d=n(86),h=n(106),m=(r(h),n(150));n(381);var g=function(e){var t=e.currentLocale,n=e.onLocaleChange;return c.default.createElement("select",{value:t,onChange:function(e){return n(e.target.value)}},m.locales.map(function(e){return c.default.createElement("option",{key:e,value:e},e)}))},y=function(e){var t=e.items.map(function(e,t){return c.default.createElement("li",{key:t,className:"pure-menu-item"},c.default.createElement(s.Link,{to:e.link,className:"pure-menu-link"},e.label))});return c.default.createElement("div",{className:"pure-menu pure-menu-horizontal"},c.default.createElement("ul",{className:"pure-menu-list"},t),c.default.createElement(g,{currentLocale:e.currentLocale,onLocaleChange:e.setLocale}))},v=t.App=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.getSession()}},{key:"render",value:function(){var e=this.props,t=e.currentLocale,n=e.setLocale,r=[{label:"Home",link:"/"},this.props.isAuthenticated?{label:"Logout",link:"/logout"}:{label:"Login",link:"/login"},{label:"Private page",link:"/private"}];return c.default.createElement("div",{id:"application"},c.default.createElement(y,{items:r,currentLocale:t,setLocale:n}),this.props.children)}}]),t}(l.Component);t.default=(0,f.connect)(function(e){return{isAuthenticated:e.authentication.isAuthenticated,currentLocale:e.locale.currentLocale}},{getSession:p.getSession,setLocale:d.setLocale})(v)},286:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(284),a=r(o),u=n(33),i=n(35);t.default=(0,u.connect)(function(e){return{errorMessage:e.authentication.errorMessage}},{login:i.login})(a.default)},287:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PrivatePage=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(33),f=n(246),p=r(f),d=t.PrivatePage=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(p.default,{component:"h2",content:"private.title"}),c.default.createElement(p.default,{component:"p",content:"private.greeting",name:this.props.username}))}}]),t}(l.Component);t.default=(0,s.connect)(function(e){var t=e.authentication;return{username:t.username}})(d)},288:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(283),a=r(o),u=n(33),i=n(151);t.default=(0,u.connect)(function(e){return{items:e.simple.items}},{fetchSimple:i.fetchSimple})(a.default)},381:function(e,t){},406:function(e,t){e.exports={private:{title:"Private page",greeting:"Hello %(name)s! How are you today?"},login:{title:"Login Page",hint:"Default login and password are 'user' and 'password'",error:{private:"Please login to access this page",unauthorized:"Please login to access this resource",badLogin:"Incorrect user and password"}}}},407:function(e,t){e.exports={private:{title:"Page privée",greeting:"Bonjour %(name)s! Comment allez-vous aujourd'hui?"},login:{title:"Page de login",hint:"L'utilisateur et le mot de passe par défaut sont 'user' et 'password'",error:{private:"Veuillez vous authentifier pour accéder à cette page",unauthorized:"Veuillez vous authentifier pour accéder à cette resource",badLogin:"Login et mot de passe incorrects"}}}}});
//# sourceMappingURL=main.js.map